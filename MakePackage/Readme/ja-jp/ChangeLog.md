## 更新履歴

### 37.0
(2020-05-29)

#### 重要

- x86版とx64版にパッケージを分離
    - 通常はx64版を使用します。OSが32bitの場合のみx86版を使用してください。
    - インストーラー版は旧バージョンのアンインストール後のインストールを強くお勧めします。
        - x86版とx64版は別アプリ扱いになり、意味はありませんが同時にインストール可能です。x86版は旧バージョンを上書きします。

- .NET framework 4.8
    - 対応フレームワークを .NET framework 4.8 に変更しました。[起動しない場合はこちらから「.NET Framework 4.8 Runtime」をインストールしてください。](https://dotnet.microsoft.com/download/dotnet-framework/net48)

- 設定ファイルのフォーマット変更
    - 設定の構造を変更し、フォーマットをJSONに変更しました。これまでのXML形式の設定ファイルも読み込み可能で、JSON形式に自動的に変換されます。
    - 設定ファイルの後方互換性はおおよそ１年ほど維持されます。つまり2021年の夏頃のバージョンでは旧XML形式は読み込めなくなる予定です。エクスポートされた設定データも同様です。

#### 新着

- 起動高速化：ZIP版を含め、旧バージョンより起動が高速化します。
- ナビゲーター：回転やスケール変更などの画像操作を行うナビゲーターパネルを新しく追加。
- ナビゲーター：「基底スケール」設定を追加。ストレッチ適用サイズをさらに補正します。
- ナビゲーター：「ページを移動しても回転を維持」等の設定をナビゲーターパネルに移動。
- ナビゲーター：自動回転設定かつ回転の維持をONにしている場合、ブック読み込み時にその回転方向を強制するようにした。
- スクリプト：JavaScriptでコマンドを拡張できるようになりました。詳細はスクリプマニュアルを参照してください。(ヘルプ > スクリプトヘルプ)
- スクリプト：既定では無効化されており、使用するためには設定で有効にする必要があります。(設定 > スクリプト)
- コマンド：「設定を保存」追加。
- コマンド：「前の表示ページに戻る」「次の表示ページに進む」追加。ページ単位の内部履歴をたどります。
- コマンド：「外部アプリで開く」コマンドパラメータのプログラムパスにNeeView自身を起動するためのキーワード "$NeeView" を追加。
- コマンド：「ランダムなページに移動」追加。
- コマンド：「ランダムなブックに移動」追加。
- コマンド：「前のNeeViewに戻る」「次のNeeViewに進む」追加。複数起動時にNeeViewを切り替えます。
- コマンド：「名前をつけてファイルに保存」画像保存ダイアログで登録されたフォルダーを選択できるようにした。
- コマンド：N字スクロールのみの表示操作用コマンド「N字スクロール↑」「N字スクロール↓」追加。
- コマンド：スクロール系のコマンドパラメータにスクロール時間設定を追加。
- システム：名前順の並び替えに自然順を適用する設定追加。(設定 > 全般 > 自然な名前順)
- システム：マウスクリックでウィンドウをアクティブ化したときのマウス操作を無効にする設定を追加。(設定 > ウィンドウ > マウスでウィンドウを～)
- パネル項目：ダブルクリックでブックを開く設定追加。(設定 > パネル > ダブルクリックでブックを開く)
- パネル項目：複数選択できるようにした。
- パネル項目：リストのサムネイル表示やバナー表示でもポップアップ設定できるようにした。(設定 > パネルリスト項目 > * > アイコンのポップアップ)
- パネル項目：リストのサムネイル表示でのホイールスクロール速度倍率設定を追加。(設定 > パネルリスト項目 > サムネイル表示でのマウスホイールスクロール倍率)
- サムネイル：画像解像度設定を追加。(設定 > サムネイル > サムネイル画像解像度)
- 本棚：現在開いているブックを示すオレンジ色のマークを追加。
- 本棚：現在の項目数を表示する設定を追加。(設定 > 本棚 > 項目数を表示)
- 本棚：Backキーで上位フォルダーに移動するショートカット削除。
- 本棚：項目の種類を区別せずにソートする設定追加。(設定 > 本棚 > ファイルの種類を区別しない並び替え)
- 本棚：既定の並び順設定「標準の既定の並び順」「プレイリストの～」「ブックマークの～」を追加。(設定 > 本棚)
- 本棚、ページリスト：コンテキストメニューに「外部アプリで開く」を追加。
- 本棚、ページリスト：コンテキストメニューに「フォルダーにコピー」を追加。
- 本棚、ページリスト：コンテキストメニューに「フォルダーに移動」を追加。ファイルの移動ができるようにした。ファイル操作許可されている場合のみ有効。
- 本棚、ページリスト：右ボタンドラッグに移動属性を追加。エクスプローラーにドロップすることでファイル移動できるようになる。 ファイル操作許可されている場合のみ有効。
- ページリスト：移動ボタン追加。
- ページリスト、ページマークリスト：画像ファイルを外部にドラッグできるようにした。
- 履歴：現在ブックの場所の履歴のみを表示する設定を追加。(履歴パネルのメニュー > 現在のフォルダーのみ)
- 履歴：無効な履歴を起動時に自動削除する設定を追加。(設定 > 履歴 > 無効な履歴を自動削除)
- エフェクト：エフェクトパネルにトリミング設定追加。
- エフェクト：「ドットのまま拡大する」の適用倍率設定を追加。(設定 > エフェクトパネル)
- ルーペ：開始カーソル位置を画面中央にする設定追加。(設定 > ルーペ > 開始カーソル位置を画面中央にする)
- ブック：ブック終端での先読みをページ送りの逆方向にも行うようにした。
- ブック：ページ終端挙動に「ダイアログで確認」を追加。(設定 > 移動 > ページの終端を超えて移動しようとした時の挙動)
- ブック：2ページ表示のときにページの終端にダミーページを表示する設定追加。(設定 > ブック > ダミーページを挿入する)
- ブック：ブックが開けない場合の通知設定を追加。(設定 > 通知 > ブックにページがない場合にメッセージを表示する)
- ブック：シャッフルしたときにページをリセットする設定を追加。(設定 > ブック > シャッフルしたときにページをリセット)
- 画僧ドラッグ操作：「範囲を選択して拡大」を追加。(設定 > マウス操作 > ドラッグ操作設定)
- 画像ドラッグ操作：拡大と同時に画面中央に移動するマウスドラッグ操作「拡大縮小(スライド式、中央寄せ)」を追加。(設定 > マウス操作 > ドラッグ操作設定)
- 起動オプション：起動時にスクリプトを実行するオプション "\-\-script" 追加。
- 起動オプション：ウィンドウ状態を指定するオプション "\-\-window" 追加。
- 設定：検索ボックスの追加。
- 設定：コマンド設定のリストに検索ボックス追加。
- 設定：SVGの拡張子を設定できるようにした。(設定 > 対応形式 > SVGファイルの拡張子)
- 設定：Susieプラグイン設定に「全有効/解除」ボタン追加。

#### 変更

- コマンド：ショートカット"Back","Shift+Back"の割当をページ履歴操作コマンドに変更。
- コマンド：「スクロール＋次のページに進む」「スクロール＋前のページに戻る」コマンドのN字スクロールの挙動改善。移動の割合を均等にした。
- コマンド：「スクロール＋次のページに進む」「スクロール＋前のページに戻る」コマンドパラメータに「ページ移動猶予(秒)」追加。あわせて「スクロール停止」フラグは廃止。
- システム：エクスプローラーの削除確認ダイアログ挙動変更。ごみ箱にはいらないときのダイアログだけ表示するようにした。
- システム：本棚等の内部履歴の上限が無制限だったのを100に変更。
- 表示：ウィンドウサイズが変わったときに表示画像位置を調整しないようにした。
- 表示：キャプションがメインビューに恒久的に表示される場合に画像が隠れないようにした。
- パネル：パネルリストの左右キー操作を既定で無効にした。(設定 > パネル > サイドパネルでの左右キー有効)
- 本棚：検索ボックスのレイアウト変更。検索設定は本棚パネルのメニューに移動。
- サムネイル：キャッシュのフォーマットを変更。これまでのキャッシュは破棄されます。
- サムネイル：キャッシュの保存場所をフォルダーのパスからファイルのパスに変更。
- サムネイル：キャッシュの有効期限が設定可能にした。(設定 > サムネイル > サムネイルキャッシュの保存期間)
- サムネイル：サムネイル画像解像度等の設定が変更された場合、異なる設定のキャッシュは自動的に再生成されるようにした。
- ブック：透過画像の背景にチェック模様を指定できるようにした。(設定 > 対応形式 > 透過画像の背景をチェック模様にする)
- ブック：標準画像ファイルの拡張子を編集できるようにした。(設定 > 対応形式 > 画像ファイルの拡張子)
- ブックページ：操作感変更。ブックページ画像上でもジェスチャーが有効になるようにし、ダブルタッチでブックを開けるようにした。
- ブックページ：レイアウト変更。フォルダーアイコン表示を削除。
- ブックページ：画像のサイズ設定追加。(設定 > ブック > ブックページ画像サイズ)
- Susie：64bitOS環境で "C:\\Windows\\System32" にSusieプラグインでアクセスできるようにした。
- 起動オプション：フルスクリーオプション "-f" を廃止。
- 設定：ページ表示設定をブック設定に統合、dip関係の設定を画像形式設定に移動。
- 設定：設定ページの再編。「表示」項目を再編成し「ウィンドウ」「パネル」といったグループに再編。
- 設定：外部アプリ設定を廃止、「外部アプリで開く」コマンドのコマンドパラメータで指定するように変更。プロトコル設定、区切り文字設定を削除。
- 設定：クリップボード設定を廃止、「ファイルをコピー」コマンドのコマンドパラメータで指定するように変更。区切り文字設定を削除。
- その他：「表示サイズ」を「ストレッチ」に名称変更。
- その他：検索ボックス、アドレスバー等でのEscキーをコマンドショートカットとして受け付けるようにした。
- その他：各種ライブラリ更新。
- その他：細かなレイアウト修正。

#### 修正

- サムネイル画像作成失敗時にクラッシュする可能性のある不具合修正。
- プレイリストの検索でクラッシュする不具合修正。プレイリストは検索に対応していないので無効化した。
- サブフォルダーを含めてブックを開くときに開けない圧縮ファイルがあった場合にブックそのものが開けない不具合修正。そのファイルのみスキップするようにした。
- 圧縮ファイルの名前変更に失敗する可能性のある不具合修正。
- ウィンドウ最小化からの復帰で画像位置が変更される不具合修正。
- その他細かな不具合修正。

----

これ以前の更新履歴は[こちら](https://bitbucket.org/neelabo/neeview/wiki/ChangeLog)を参照してください。
