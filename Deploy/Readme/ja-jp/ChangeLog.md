# NeeView <VERSION/> - 更新履歴

----

## 34.4
(2019-06-08)

- サブディスプレイで最大化状態で復元しない不具合修正
- リサイズフィルター有効時にルーペモードのままブックを切り替えると読み込みが終わらない不具合修正
- 画像を開いていないときの画像拡大縮小操作でクラッシュする不具合修正
- ソリッド圧縮ファイル事前メモリ展開有効時にSusieプラグイン画像読み込に失敗することがある不具合修正
- ブックのファイル削除に失敗することがある不具合修正
- MSIインストーラーでの更新でタスクバーのショートカットが無効化する現象の対策。次の更新から機能します

----

## 34.3
(2019-05-18)

- 前回開いていたプレイリストが削除されたときにクラッシュする不具合修正

----

## 34.2
(2019-05-11)

- ページの読み込み中マークが消えないことがある不具合修正
- Ｎ字スクロールで前ページ移動時の初期位置が上角になる不具合修正
- タイトルバー非表示でウィンドウサイズが変更できないことがある不具合修正
- リサイズフィルターONのときにページ移動優先OFFが機能しない不具合修正
- サブディスプレイでタイトルバーを非表示にしたときにエラーになることがある不具合修正

----

## 34.1
(2019-05-07)

- ページ送りでブック移動するとエラーになる不具合を修正しました。

----

## 34.0
(2019-05-06)


### メモリ＆パフォーマンス

設定に「メモリとパフォーマンス」ページ追加。メモリ関連の設定をここに集約しました。(設定 > メモリとパフォーマンス)

- ブックのキャッシュメモリ容量設定追加。画像をキャッシュし、再表示を高速化します。
- 先読みをページ数指定に変更、キャッシュメモリ容量の範囲内で先読みを行います。
- ソリッド圧縮ファイルの事前展開先をメモリにする設定追加
- ソリッド圧縮ファイル事前展開の判定サイズを展開後のサイズで計算するようにした

### ブック挙動の改善

- GIFアニメページ切替時の暗転を軽減
- 動画やGIFファイルを高速で切り替えたときに反応が遅くなる現象の軽減
- リサイズフィルター適用時に画像切り替えが見える現象を軽減

### ページの種類の追加

- ブックに含まれるブック(フォルダー、圧縮ファイル)をブックページとして表示可能になりました。(設定 > 環境 > ページになるファイルの種類)
    - ブックページにはブックのサムネイルが表示されます。ダブルクリックすることでそのブックを開くことができます。
    - ページリストのブックページにはフォルダーアイコンが表示されます。ダブルクリックすることでそのブックを開くことができます。
- SVGファイル対応 （設定 > 画像)

### ページ設定刷新

- 新しいページ設定。設定項目毎の挙動を１つの設定ページにまとめました。(設定 > ページ設定)

### ページ移動コマンド追加

- 「前のフォルダーに移動」「次のフォルダーに移動」コマンド追加。並び順が名前順である場合に限り異なるサブフォルダーの先頭ページに移動します。

### ブック移動コマンド追加

- 「前に戻る(Alt+Left)」「次に進む(Alt+Right)」 は、シンプルな本の履歴を遡ります。このため、同じ本を開くことがあります。「履歴リスト」とは別の情報です。
    - アドレスバーの左矢印、右矢印ボタンに対応します。今までは履歴リストの移動だったので、挙動の変更になります。
    - 履歴リストの移動コマンドは「前の履歴に戻る」「次の履歴に進む」に名前変更されました。
- 「親のブックを開く(Alt+Up)」は、現在のブックの上位階層をブックとして開きます。
    - アドレスバーの上矢印ボタンに対応します。
- 「このブックを開く(Alt+Down)」は、ページがブックページである場合にそのブックを開きます。

### 本棚

- フォルダーサムネイルはサブフォルダーの画像からも検索するようにした
- 圧縮ファイルのディレクトリ階層単位の展開に対応 (設定 > 環境 > 圧縮ファイルの扱い)
- 本棚で隠しファイルを表示する設定追加 (設定 > 本棚 > 詳細)
- 検索ボックスでIME入力中もインクリメンタルサーチが効くようにした
- 検索オプション追加
    - `/ire` 大文字小文字を区別しない正規表現検索
    - `/since`, `/until` 日時範囲指定。詳細は検索オプションヘルプを参照してください。 (ヘルプ > 検索オプションヘルプ)

### プレイリスト

プレイリストは、ファイルパスをリスト化したものです。フォルダー、圧縮ファイル、画像ファイル等すべてのファイルがリスト化できます。  
本棚で開けばフォルダーの一種として動作し、本として開けばページになります。

- 複数ファイルをまとめてドロップしたときには一時的なプレイリストとして表示されます。
- 起動引数として複数ファイルを指定した場合も一時的なプレイリストとして表示されます。
- 本棚の状態をプレイリストファイル `.nvpls` として保存できます。(本棚の詳細メニュー > プレイリストを保存) 
- `.nvpls` ファイルのフォーマットは単純なJSON形式になっているため、メモ帳でも編集可能です。

### 画像操作

- 回転、拡縮、反転の中心設定に「カーソル位置」を追加、個別に設定できるようにした (設定 > 画像操作全般 > ビュー操作)
- ドラッグアクションに「回転(スライド式)」を追加 (設定 > マウス操作 > ドラッグ操作設定)
- 画像のドラッグ移動制限は回転とスケール変更によって解除されるようになりました。
- 自動回転コマンドを「自動左回転」と「自動右回転」の２つのコマンドに分離しました。

### ウィンドウ外観

- メニューのダークテーマ対応。全体のテーマとは別に設定。 (設定 > 表示全般 > テーマ)
- タイトルバーを非表示にしたときのウィンドウ定義整備。枠の種類は「なし」と「標準」のみに変更。
- タイトルバーを非表示にしたときにタイトル文をメニューバー余白に表示するようにした
- メインメニューをハンバーガーメニューに変更できるようにした (設定 > 表示全般 > 詳細設定)
- 背景に黒チェック模様追加

### Susieプラグイン

通常版の NeeView でもSusieプラグインが使用できます。ただし64bitOSでは [TORO氏提案の64bit版Susieプラグイン形式(.sph)](http://toro.d.dooo.jp/slplugin.html) のみの対応となります。
64bitOSで標準のSusieプラグイン(.spi)を使用する場合はこれまで通り NeeVewS をご使用ください。

- 64bit版Susieプラグイン(.sph)対応
- Susieプラグインを使用しないときはプラグインファイルにアクセスしないようにした
- Susieプラグイン毎の拡張子設定追加

### その他
 
- ブック読み込み中はアドレスバーの再読込ボタンが閉じるボタンに変更されます。
- サイドパネル自動非表示時でウィンドウ外にカーソルが移動したときも非表示にするようにした
- 動画スライダーのホイール対応
- メニューの「その他(O)」を「オプション(O)」と「ヘルプ(H)」に分割
- 設定ウィンドウを開き直したときに前回の設定ページを表示するようにした
- コマンド設定ページにコマンド説明文も表示するようにした
- パネルリスト項目の補足パス表示形式統一、設定で標準表示との切替可能 (設定 > パネルリスト項目 > コンテンツ表示)
- 画像の解像度情報を反映する設定追加。アスペクト比が画像情報通りになります (設定 > 画像)
- 「アニメーションGIFを再生する」「拡張子が不明なファイルを画像ファイルとみなす」設定を画像対応形式ページに移動 (設定 > 画像)
- ページマークリストのパス順の設定を詳細メニューに追加 (ページマークリストの詳細メニュー > パス順)
- タイトル文字用キーワードに $PageL, $PageR を追加 (設定 > ウィンドウタイトル)
- 更新履歴をパッケージに含めるようにした

### 廃止された設定

- 「メモリ管理をシステムに任せる」設定を廃止。
- 7-Zipの「全て事前展開する」設定廃止。
- 自動サブフォルダー「ページ外ファイルも含めて判定する」設定廃止
- 読み込み中のページ表示にサムネイル画像で代用する設定を廃止。前のページを表示し続ける、ダミー表示にするかの２択になります。

----

これ以前の更新履歴は[こちら](https://bitbucket.org/neelabo/neeview/wiki/ChangeLog)を参照してください。
